<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>РК по английскому</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            border: none;
            line-height: normal;
            transition: all ease 0.1s;
            box-sizing: border-box;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        aside, nav, footer, header, section, main {
            display: block;
        }

        img {
            vertical-align: top;
        }

        img, svg {
            max-width: 100%;
            height: auto;
        }

        input, textarea, button, select {
            font-family: inherit;
            font-size: inherit;
            color: inherit;
            background-color: transparent;
        }

        input::-ms-clear {
            display: none;
        }

        button, input[type="submit"] {
            display: inline-block;
            box-shadow: none;
            background: transparent none;
            cursor: pointer;
        }

        input:focus, input:active,
        button:focus, button:active {
            outline: none;
        }

        button::-moz-focus-inner {
            padding: 0;
            border: 0;
        }

        label {
            cursor: pointer;
        }

        legend {
            display: block;
        }

        html, body {
            height: 100%;
        }

        body {
            margin: 0;
        }
    </style>
    <style>
        .container {
            margin: 0 0 auto;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 50px 100px;

            .container__header {
                display: flex;
                align-items: center;
                justify-content: space-between;

                .nav {
                    display: flex;
                    align-items: center;
                    gap: 20px;
                }
            }

            .container__main {
                display: flex;
                flex-direction: column;
                gap: 20px;
                flex: 1 1 auto;

                .contents {
                    display: flex;
                    flex: 1 1 auto;
                    justify-content: space-between;

                    .contents__item {
                        width: 49.5%;
                        display: flex;
                        flex-direction: column;

                        div {
                            flex: 1 1 auto;

                            textarea {
                                height: 100%;
                                resize: none;
                            }
                        }
                    }
                }

                button {
                    margin: 0;
                    height: 50px;
                }
            }

            .container__footer {
                display: flex;
                justify-content: center;
                align-items: center;
            }
        }
    </style>
    <link rel="stylesheet" href="https://u-and-i.netlify.app/Components/u-and-i-v2.css">
</head>
<body>
<div class="container">
    <div class="container__header">
        <h1>РК по английскому</h1>
        <div class="nav">
            <a class="link-text link-text-primary" onclick="setPage1()">Страница 1</a>
            <a class="link-text link-text-primary" onclick="setPage2()">Страница 2</a>
            <a class="link-text link-text-primary" onclick="setAltParser()">Альтернативный парсер</a>
        </div>
    </div>
    <div class="container__main">
        <div class="contents">
            <div class="contents__item">
                <label class="form-label" id="label">Сюда текст должен подставиться автоматически - включите
                    JavaScript</label>
                <div>
                <textarea type="email" class="form-field form-textarea" placeholder="Скопируйте сюда HTML" rows="3"
                          id="content"></textarea>
                </div>
            </div>
            <div class="contents__item">
                <label class="form-label">Результат</label>
                <div>
                <textarea type="email" class="form-field form-textarea" placeholder="Здесь будет результат" rows="3"
                          id="ready" readonly></textarea>
                </div>
            </div>
        </div>

        <button class="btn btn-solid-primary" onclick="parse()">Обработать</button>
    </div>
    <div class="container__footer">
        <a href="https://github.com/siberianbearofficial" target="_blank" class="link-text link-text-secondary">Разработано
            на ИУ7</a>
    </div>
</div>
<script>
    const contentElement = document.getElementById('content');
    const readyElement = document.getElementById('ready');
    const labelElement = document.getElementById('label');

    const domParser = new DOMParser();

    let page = 1;
    setPage1();

    function strip(str, charToRemove) {
        const regex = new RegExp(`^${charToRemove}+|${charToRemove}+$`, 'g');
        return str.replace(regex, '');
    }

    function page3() {
        if (contentElement.value) {
            const content = contentElement.value;
            const doc = domParser.parseFromString(content, 'text/html');

            const parser = new AltParser(doc);

            readyElement.value = parser.parseAll();
        } else
            readyElement.value = 'Вы точно не забыли вставить HTML слева?';
    }

    function parse() {
        if (page === 1)
            page1();
        else if (page === 2)
            page2();
        else if (page === 3)
            page3();
        else
            console.error('no such page:', page);
    }

    function setPage1() {
        page = 1;
        labelElement.innerHTML = `HTML страницы c <b>ТЕСТОВОЙ ЧАСТЬЮ</b>`
    }

    function setPage2() {
        page = 2;
        labelElement.innerHTML = `HTML страницы c <b>ДЛИННЫМ ТЕКСТОМ</b>`
    }

    function setAltParser() {
        page = 3;
        labelElement.innerHTML = `HTML любой страницы`
    }
</script>
<script src="parser.js"></script>
</body>
</html>
